module MyDungeonGame
  module LevelManager
    module_function

    def get_exp(level)
      LEVEL_EXP_TABLE[level]
    end

    def get_level(current_level, exp)
      required_exp = get_exp(current_level + 1)
      if exp < required_exp
        return current_level
      end

      n = 0
      while exp >= required_exp
        n += 1
        next_level = current_level + n
        check_level = next_level + 1
        required_exp = get_exp(check_level)
      end
      next_level
    end

    LEVEL_EXP_TABLE = {
      1  =>         0,
      2  =>        10,
      3  =>        30,
      4  =>        60,
      5  =>       100,
      6  =>       160,
      7  =>       250,
      8  =>       370,
      9  =>       530,
      10 =>       730,
      11 =>       970,
      12 =>     1_300,
      13 =>     1_600,
      14 =>     2_000,
      15 =>     2_400,
      16 =>     2_900,
      17 =>     3_500,
      18 =>     4_200,
      19 =>     5_000,
      20 =>     6_000,
      21 =>     7_000,
      22 =>     8_000,
      23 =>    10_000,
      24 =>    13_000,
      25 =>    17_000,
      26 =>    22_000,
      27 =>    28_000,
      28 =>    35_000,
      29 =>    43_000,
      30 =>    52_000,
      31 =>    62_000,
      32 =>    73_000,
      33 =>    85_000,
      34 =>   100_000,
      35 =>   120_000,
      36 =>   150_000,
      37 =>   180_000,
      38 =>   210_000,
      39 =>   240_000,
      40 =>   270_000,
      41 =>   300_000,
      42 =>   350_000,
      43 =>   400_000,
      44 =>   450_000,
      45 =>   500_000,
      46 =>   550_000,
      47 =>   600_000,
      48 =>   650_000,
      49 =>   700_000,
      50 =>   750_000,
      51 =>   800_000,
      52 =>   850_000,
      53 =>   900_000,
      54 =>   950_000,
      55 => 1_000_000,
      56 => 1_050_000,
      57 => 1_100_000,
      58 => 1_150_000,
      59 => 1_200_000,
      60 => 1_250_000,
      61 => 1_310_000,
      62 => 1_370_000,
      63 => 1_430_000,
      64 => 1_490_000,
      65 => 1_550_000,
      66 => 1_610_000,
      67 => 1_670_000,
      68 => 1_730_000,
      69 => 1_790_000,
      70 => 1_850_000,
      71 => 1_910_000,
      72 => 1_970_000,
      73 => 2_030_000,
      74 => 2_090_000,
      75 => 2_150_000,
      76 => 2_210_000,
      77 => 2_270_000,
      78 => 2_330_000,
      79 => 2_390_000,
      80 => 2_450_000,
      81 => 2_510_000,
      82 => 2_570_000,
      83 => 2_630_000,
      84 => 2_690_000,
      85 => 2_750_000,
      86 => 2_810_000,
      87 => 2_870_000,
      88 => 2_930_000,
      89 => 2_990_000,
      90 => 3_050_000,
      91 => 3_110_000,
      92 => 3_170_000,
      93 => 3_230_000,
      94 => 3_290_000,
      95 => 3_350_000,
      96 => 3_410_000,
      97 => 3_470_000,
      98 => 3_530_000,
      99 => 3_590_000,
    }.freeze
  end
end
